class: middle, center

# å®šæ—¶å™¨

é™ˆä¸€å¸…

å®åŠ¡å­¦å ‚

.footnote[Webå‰ç«¯]

---
# ä»‹ç»

- æ‰‹æœºé‡Œæœ‰å®šæ—¶å™¨ï¼Œåˆ°æ—¶æé†’
- ç½‘é¡µé‡Œä¹Ÿå¯ä»¥è¿™ä¹ˆåš
- æœ¬èŠ‚æˆ‘ä»¬å­¦ä¹ å¦‚ä½•é€šè¿‡ç”¨JSè®¾ç½®å®šæ—¶å™¨ï¼Œå®ç°å„ç§åŠ¨ç”»
- é™¤äº†åŠ¨ç”»ï¼Œå®šæ—¶å™¨ä¹Ÿæœ‰å…¶å®ƒå¾ˆå¤šç”¨é€”

---
# ä½œå“

- å…ˆè¯·å¤§å®¶æ¬£èµä¸€å‰¯ä½œå“
- èƒŒæ™¯å‘¨æœŸå˜åŒ–
- æ–‡å­—é€ä¸ªå‡ºç°ï¼Œå·¦ç§»
  - TypeIt åŠ¨ç”»æ•ˆæœ

[å®šæ—¶å™¨ç¤ºä¾‹](../js-timer/quietudes/index.html)

???

- [JSä¸ªäººä¸»é¡µ](https://quietudes.github.io)
- [Githubä»£ç ä¸‹è½½](https://github.com/quietudes/quietudes.github.io)

---
# TypeItåŠ¨ç”»æ•ˆæœJSå®ç°

- æ¯æ¬¡å‡ºç°ä¸€ä¸ªå­—
- èƒŒæ™¯çŸ¥è¯†
  - å­—ç¬¦ä¸²æ•°ç»„

---
# å­—ç¬¦ä¸²æ•°ç»„

- å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªæ•°ç»„

```js
var txt = "(å®‰é™çš„æˆ¿é—´)";
```

- å–iä½ç½®çš„å­—ç¬¦

```js
txt.charAt(i);
```

- è·å¾—å­—ç¬¦ä¸²çš„é•¿åº¦

```js
txt.length
```

---
# å­—ç¬¦ä¸²çš„é€å­—è®¿é—®

- å¾ªç¯è®¿é—®å­—ç¬¦ä¸²ä¸­æ¯ä¸€ä¸ªå­—

```js
var i = 0;
for (i = 0; i < txt.length; i++){
  console.log(txt.charAt(i))
}
```

---
# é™„åŠ 

- æ¯æ¬¡å–å­—ç¬¦ä¸²çš„ä¸€ä¸ªå­—ï¼Œæ·»åŠ åˆ°å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²åé¢
- ç”¨ += æ“ä½œç¬¦ï¼Œå åŠ 

```js
var i = 0;
var x;
for (i = 0; i < txt.length; i++){
  console.log(x += txt.charAt(i))
}
```

---
# ä»‹ç»

- DOMè¡¨ç¤ºç½‘é¡µçš„æ–‡æ¡£æ¨¡å‹
  - æ–‡æ¡£å¯¹è±¡æ¨¡å‹ ï¼ˆDocument Object Modelï¼‰
- å½“æµè§ˆå™¨åŠ è½½ç½‘é¡µæ—¶ï¼Œå®ƒä¼šåˆ›å»ºè¯¥ç½‘é¡µçš„æ¨¡å‹
- JavaScriptç¨‹åºå¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œæ›´æ”¹å¯è§çš„æ–‡æ¡£
- JavaScriptå¯ä»¥é€šè¿‡è®¾ç½®styleå±æ€§æ¥ä¿®æ”¹å…ƒç´ æ ·å¼

---
# DOM Tree

- DOMåƒä¸€æ£µæ ‘ä¸€æ ·ç»„ç»‡ï¼Œå…¶ä¸­å…ƒç´ æ ¹æ®æ–‡æ¡£çš„ç»“æ„åˆ†å±‚æ’åˆ—
- è¯¥æ¨¡å‹è¢«ç§°ä¸ºâ€œDOMæ ‘â€ï¼Œå­˜å‚¨åœ¨æµè§ˆå™¨çš„å†…å­˜ä¸­

---
# DOM Tree

- HTMLä¸­çš„æ¯ä¸ªå…ƒç´ ï¼ˆelementï¼‰ï¼Œå±æ€§ï¼ˆattributeï¼‰å’Œæ–‡æœ¬ï¼ˆtextï¼‰éƒ½ç”±å…¶è‡ªå·±çš„â€œDOMèŠ‚ç‚¹â€è¡¨ç¤º
.center[.width-100[![](../js-dom/dom.jpeg)]]

  - èŠ‚ç‚¹ä¹‹é—´çš„ç©ºç™½ä¹Ÿè¢«åˆ›å»ºäº†æ–‡æœ¬èŠ‚ç‚¹

???
When a browser loads a web page, it creates a model of that page
This is called a â€œDOM treeâ€ and it is stored in the browserâ€™s memory
Every element, attribute, and piece of text in the HTML is represented by its own â€œDOM nodeâ€

---
# DOM èŠ‚ç‚¹ç±»å‹

- æ–‡æ¡£èŠ‚ç‚¹ï¼Œä»£è¡¨æ•´ä¸ªé¡µé¢
- å…ƒç´ èŠ‚ç‚¹ï¼Œä»£è¡¨å•ä¸ªHTMLæ ‡ç­¾
- å±æ€§èŠ‚ç‚¹ï¼Œä»£è¡¨HTMLæ ‡ç­¾çš„å±æ€§ï¼Œä¾‹å¦‚class
- æ–‡æœ¬èŠ‚ç‚¹ï¼Œè¡¨ç¤ºå…ƒç´ å†…çš„æ–‡æœ¬ï¼Œä¾‹å¦‚pæ ‡ç­¾çš„å†…å®¹

.center[.width-70[![](../js-dom/dom.jpeg)]]

---
# DOM èŠ‚ç‚¹ç±»å‹

- æ¯ä¸ªDOMèŠ‚ç‚¹å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªnodeTypeå±æ€§ï¼Œè¯¥å±æ€§åŒ…å«æ ‡è¯†èŠ‚ç‚¹ç±»å‹çš„ä»£ç ï¼ˆæ•°å­—ï¼‰
- å…ƒç´ 
  - ä»£ç 1ï¼ŒNode.ELEMENT_NODE
- æ–‡æœ¬
  - ä»£ç 3ï¼ŒNode.TEXT_NODE
- æ³¨é‡Š
  - ä»£ç 8ï¼ŒNode.COMMENT_NODE

???

ç¤ºä¾‹æ–‡æ¡£çš„<body>æ ‡è®°ä¸ä»…æœ‰3ä¸ªå­å…ƒç´ ï¼ˆ<h1>å’Œ2ä¸ª<p>å…ƒç´ ï¼‰ï¼Œè€Œä¸”å®é™…ä¸Šæœ‰7ä¸ªï¼šè¿™3ä¸ªå…ƒç´ ï¼Œä»¥åŠå®ƒä»¬ä¹‹å‰ï¼Œä¹‹åå’Œä¹‹é—´çš„ç©ºæ ¼ã€‚

---
# DOMæ“ä½œï¼šæŸ¥æ‰¾

- æ‰¾åˆ°IDä¸º"title"çš„HTMLå…ƒç´ 

```js
getElementById("title")
```

  - ç±»ä¼¼JQueryçš„ $("#title")

---
# DOMæ“ä½œï¼šè¯»å–

- è·å¾—å…ƒç´ åï¼Œå¯ä»¥åƒJQueryä¸€æ ·ï¼Œè¯»å–å’Œè®¾ç½®å®ƒçš„å„ç§å±æ€§
- å¦‚ï¼šè¯»å–å…ƒç´ çš„HTMLå†…å®¹

```js
var t = document.getElementById("title");
t.innerHTML
```

- ä¹Ÿå¯ä»¥è¿ç€å†™ï¼Œå†™ä¸º

```js
document.getElementById("title").innerHTML
```

---
# DOMæ“ä½œï¼šè®¾ç½®

- å¯ä»¥è®¾ç½®å…ƒç´ çš„å„ç§å±æ€§
- å¦‚ï¼šè®¾ç½®å…ƒç´ HTMLå†…å®¹

```js
t.innerHTML = "<h1>Hello</h1>";
```

- ä¹Ÿå¯ä»¥è¿ç€å†™ï¼Œå†™ä¸º

```js
document.getElementById("title").innerHTML
          = "<h1>Hello</h1>"
```

---
# DOMæ“ä½œï¼šè®¾ç½®

- è®¾ç½®æ–‡æœ¬

```js
t.innerText = "<h1>Hello</h1>";
```

---
# ç»ƒä¹ 1

- æ‰“å¼€ä¸‹é¢çš„ç½‘é¡µï¼Œè¿›å…¥æ§åˆ¶å°
- è¿›å…¥Sourceï¼Œå¼€å§‹æºä»£ç è°ƒè¯•
- è®¾ç½®æ–­ç‚¹ï¼Œåˆ·æ–°é¡µé¢ï¼Œç¡®ä¿åœ¨æ–­ç‚¹å¤„åœæ­¢
- å®éªŒå„ç§DOMæ“ä½œï¼Œè§‚å¯Ÿæ•ˆæœ

[DOMç®€å•ç»ƒä¹ ](../js-timer/template.html)

---
# å‡½æ•°

```js
function ä½ å¥½(){
  console.log("Helloï¼");
}
```

---
# å®šæ—¶å™¨

- è®¡åˆ’åœ¨ç»™å®šçš„æ¯«ç§’æ•°åï¼Œè°ƒç”¨ä¸€ä¸ªå‡½æ•°
- ä¾‹ï¼š1000æ¯«ç§’ï¼ˆä¹Ÿå°±æ˜¯1ç§’ï¼‰åï¼Œè°ƒç”¨å‡½æ•°â€œä½ å¥½â€

```js
setTimeout(ä½ å¥½, 1000);
```

---
# å®šæ—¶å™¨

```js
function go() {
  text.textContent += ' å¥½ç©ï¼ŒGo!';
}
setTimeout(go, 2000);
```

[å®šæ—¶å›å¤ç¤ºä¾‹](../js-timer/timeout.html)

---
# è¯´å®Œå†è¯´

- åœ¨å‡½æ•°â€œä½ å¥½â€é‡Œï¼Œè¯´å®Œâ€œHelloâ€åï¼Œå†è®¾å®šæ—¶å™¨ï¼Œ1ç§’åå†è°ƒè‡ªå·±ï¼Œå†è¯´â€œHelloâ€
- å°±æ°¸è¿œè¯´ä¸‹å»äº†

```js
function ä½ å¥½() {
    console.log("Helloï¼");
    setTimeout(ä½ å¥½, 1000);
}
ä½ å¥½();
```

---
# ç»ƒä¹ 2

- ä¿®æ”¹ [å®šæ—¶å›å¤ç¤ºä¾‹](../js-timer/timeout.html)ï¼Œè®©å®ƒä¸€ç›´å›å¤ä¸‹å»
- è¦æ±‚
  - æ¯éš”4ç§’ï¼Œå›å¤ä¸€å¥

---
# åªè¯´3é

```js
var i = 0
function ä½ å¥½() {
  if (i<3){
    console.log("Helloï¼");
    setTimeout(ä½ å¥½, 1000);
    i++;
    }
}
ä½ å¥½();
```

---
# ç»ƒä¹ 3

- ä¿®æ”¹ [å®šæ—¶å›å¤ç¤ºä¾‹](../js-timer/timeout.html)ï¼Œè®©å®ƒåªå›å¤ä¸‰é
- è¦æ±‚
  - æ¯éš”4ç§’ï¼Œå›å¤ä¸€å¥

---
# å®ä¾‹ï¼šç§‘èšªä¸“å±æ”¾æ¾å¹³å°

- valueOf() å–å¾—å½“å‰æ ‡ç­¾çš„æ–‡å­—å€¼

[å®ä¾‹ï¼šç§‘èšªä¸“å±æ”¾æ¾å¹³å°](../js-timer/quietudes/breathe.html)

[ä»£ç ](../js-timer/quietudes/assets/js/breathe.js)

---
# æ¸…é™¤

- æœ‰æ—¶æ‚¨éœ€è¦å–æ¶ˆå®šæ—¶å™¨
- é¦–å…ˆå­˜å‚¨setTimeoutè¿”å›çš„å€¼
- åé¢å°±å¯ä»¥å¯¹å®ƒè°ƒç”¨clearTimeoutæ¥å–æ¶ˆå®ƒ
- æ³¨æ„ä¸‹é¢æ˜¯ç®­å¤´å‡½æ•°

```js
let bombTimer = setTimeout(() => {
  console.log("å³å°†çˆ†ç‚¸!"); }, 500);
if (Math.random() < 0.5) {
  // 50% çš„æœºä¼š
  console.log("æ‹†é™¤æˆåŠŸ.");
  clearTimeout(bombTimer);
}
```

---
# ç»ƒä¹ 4

- ä¿®æ”¹[ç‚¸å¼¹ç¤ºä¾‹](../js-timer/bomb.html)ï¼ŒåŠ ä¸Šç‚¸å¼¹æ•ˆæœ
- å†æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœéšæœºæ•°å¤§äºç­‰äº0.5ï¼ŒæŠŠè¯¥å…ƒç´ å†…å®¹è®¾ç½®ä¸º ğŸ’¥
- æç¤º
  - ğŸ’¥ æ˜¯ä¸€ä¸ªå¯ä»¥ç²˜è´´çš„å­—ç¬¦ï¼Œä¸æ˜¯ä¸€ä¸ªå›¾ç‰‡ã€‚å°±æŠŠå®ƒå½“æ–‡å­—å°±å¯ä»¥ã€‚

---
# é‡å¤è®¡æ—¶å™¨

- ä¹Ÿå¯ä»¥è®¾ç½®ä¼šè‡ªåŠ¨é‡å¤çš„è®¡æ—¶å™¨
  - setIntervalç”¨æ¥è®¾ç½®æ¯Xæ¯«ç§’é‡å¤ä¸€æ¬¡çš„è®¡æ—¶å™¨
  - clearInterval å¯ä»¥æ¸…é™¤è¯¥è®¡æ—¶å™¨

```js
let ticks = 0;
let clock = setInterval(() => {
  console.log("æ»´ç­”", ticks++);
    if (ticks == 10) {
      clearInterval(clock);
      console.log("åœæ­¢.");
  }
}, 200);
```

[é‡å¤è®¡æ—¶å™¨ç¤ºä¾‹](../js-timer/dida-interval.html)

---
# é‡å¤è®¡æ—¶å™¨

```js
let animation = setInterval(skate, 4);
function skate() {
  skater.style.top = position + 'px'; // CSS top property
  skater.style.left = position + 'px'; // CSS left property
```

[æ»‘æ¿å®šæ—¶å™¨ç¤ºä¾‹](../js-timer/interval.html)

[ç¤ºä¾‹](../js-timer/set-interval.html)

---
# ç»ƒä¹ 5

- ä¿®æ”¹[ç‚¸å¼¹ç¤ºä¾‹](../js-timer/bomb.html)ï¼Œå˜æˆæ¯éš”1ç§’å‡ºä¸€ä¸ªç‚¸å¼¹ã€‚
- 10ä¸ªç‚¸å¼¹åï¼Œæ˜¾ç¤ºâ€œè½°ç‚¸å®Œæˆï¼Œå›å®¶åƒé¥­ï¼â€

---
# ç§‘èšªä¸“å±å†™ä½œå¹³å°

[ç§‘èšªä¸“å±å†™ä½œå¹³å°](../js-timer/quietudes/write.html)

[ä»£ç ](../js-timer/quietudes/assets/js/write.js)

---
# ç›‘æ§ç”¨æˆ·è¾“å…¥

- ç”¨æˆ·æ¯åœ¨inputè¾“å…¥æ¡†é‡Œæ•²ä¸€ä¸ªé”®ï¼Œå½“é”®å¼¹èµ·çš„æ—¶å€™ï¼ˆkeyupï¼‰ï¼Œå°±ä¼šè°ƒç”¨å‡½æ•° function
  - æ³¨æ„è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°
  - æœ‰ä¸€ä¸ªå‚æ•°eï¼Œè¿™ä¸ªé‡Œé¢å­˜ç€è¿™ä¸ªé”®çš„ä¸€äº›ä¿¡æ¯
- è¿™ä¸ªå‡½æ•°å†è°ƒç”¨ wordCounter å‡½æ•°

```js
input.addEventListener('keyup', function(e){
  wordCounter(e.target.value);
});
```

---
# å­—æ•°ç»Ÿè®¡

- wordCounter å‡½æ•°å…ˆè·å–ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬

```js
document.getElementById('input').value
```

- ç„¶åç”¨æ­£åˆ™è¡¨è¾¾å¼æå–é‡Œé¢çš„å•è¯ä¸ªæ•°

```js
text.match(/\S+/g).length
```

---
# æ­£åˆ™è¡¨è¾¾å¼

- æå–ç¬¦åˆæŸç§æ¨¡å¼çš„å­—ç¬¦ä¸²
- æ¯”å¦‚

```js
var x = "ç§‘èšª å¸…å“¥ä»¬ ä½ ä»¬ å¥½å—ï¼Ÿ";
console.log(x.match(/\S+/g));
```

---
# æ­£åˆ™è¡¨è¾¾å¼

```js
console.log(x.match(/\S+/g));
```

- \S: éç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼ï¼ŒTabé”®ï¼‰
- \+ï¼šå‡ºç°è‡³å°‘ä¸€æ¬¡
  - åŠ å·æ˜¯è¿½åŠ çš„æ„æ€ï¼Œå¾—å…ˆæœ‰ä¸€ä¸ªï¼Œç„¶åæ‰èƒ½è¿½åŠ 
- gï¼šä¿®é¥°ç¬¦ï¼Œè¡¨ç¤ºå…¨å±€åŒ¹é…
  - æŒ‰é¡ºåºæ‰¾åˆ°.red[æ‰€æœ‰]æ»¡è¶³åŒ¹é…æ¨¡å¼çš„æ‰€æœ‰å­ä¸²ï¼Œå¼ºè°ƒâ€œæ‰€æœ‰â€ï¼Œè€Œä¸åªæ˜¯â€œç¬¬ä¸€ä¸ªâ€ã€‚gæ˜¯å•è¯globalçš„é¦–å­—æ¯

[æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦åŒ¹é…æ”»ç•¥](https://zhuanlan.zhihu.com/p/27338649)

---
# ç»ƒä¹ 6ï¼šFCCæ­£åˆ™è¡¨è¾¾å¼

[FCCç»ƒä¹ ](https://learn.freecodecamp.one/javascript-algorithms-and-data-structures/regular-expressions)

- 30ä¸ªç»ƒä¹ ï¼Œéœ€è¦3ä¸ªå°æ—¶å·¦å³

---
# è¿›åº¦æ¡æ˜¾ç¤º

```js
var bar = document.getElementById("innerBar");
document.getElementById("innerBar")
                .style.width = '100%'
```

---
# å®šæ—¶æ›´æ–°é¡µé¢ä¸Šæ˜¾ç¤ºçš„æ—¶é’Ÿ

- å®šæ—¶æ›´æ–°

```js
var t = setTimeout(startTime, 1000);
```

- é‡‡ç”¨é¢å‘å¯¹è±¡çš„è¯­æ³•ï¼Œè·å¾—å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´

```js
var today = new Date();
var h = today.getHours();
var m = today.getMinutes();
```

---
# æ—¶é—´æ˜¾ç¤ºæ ¼å¼ç»Ÿä¸€

- 9ç‚¹8åˆ†ï¼Œä¼šæ˜¾ç¤ºä¸º09:08
- æ‰€ä»¥ï¼Œå¦‚æœè·å¾—çš„å°æ—¶å’Œåˆ†é’Ÿæ˜¯ä¸€ä½æ•°ï¼ˆæ¯”å¦‚9ï¼‰ï¼Œå°±è¦åœ¨å‰é¢åŠ â€0â€œ

```js
function checkTime(i) {
  if (i < 10) {i = "0" + i};
  return i;
}
```

---
# æŠ¤çœ¼æ¨¡å¼

- å¦‚æœç”¨æˆ·ç‚¹å‡»æœˆäº®â˜½å’Œå¤ªé˜³â˜€çš„å…ƒç´ çš„è¯ï¼Œæ›´æ¢æ˜¾ç¤ºæ¨¡å¼
- ç”¨ onclick è®¾ç½®å“åº”å‡½æ•°
  - ç±»ä¼¼JQueryçš„click()

```js
var moon = document.getElementById("moon");
moon.onclick = function darkMode() {
```

---

# ä¸¤ç§æ¨¡å¼

- äº®æ¨¡å¼å’Œæš—æ¨¡å¼
- è®¾ç½®èƒŒæ™¯è‰²å’Œæ–‡æœ¬è‰²

```js
document.documentElement.style
        .setProperty('--bg-color', '#303030');
document.documentElement.style
        .setProperty('--text-color', '#e3e3e3');
```

---

# ç»ƒä¹ 7

- ä¿®æ”¹ [ç§‘èšªä¸“å±æ”¾æ¾å¹³å°](../js-timer/quietudes/breathe.html)ï¼Œåœ¨ä¸Šé¢å®æ—¶æ˜¾ç¤ºç°åœ¨çš„æ—¶é—´ã€‚å¦‚æœå¤ªæ™šï¼Œæ˜¾ç¤ºè­¦å‘Šï¼šâ€œåŒå­¦æ˜å¤©å†åšä¹Ÿæ¥å¾—åŠï¼èµ¶ç´§ç¡è§‰â€
- ä¿®æ”¹ [ç§‘èšªä¸“å±å†™ä½œå¹³å°](../js-timer/quietudes/write.html)ï¼Œåœ¨ä¸Šé¢æ˜¾ç¤ºè®¡æ—¶å™¨ï¼Œè®¡æ—¶å™¨å€’è®¡æ—¶30åˆ†é’Ÿï¼Œ5åˆ†é’Ÿçš„æ—¶å€™ï¼ŒèƒŒæ™¯å˜ä¸ºé»„è‰²ï¼›0åˆ†é’Ÿçš„æ—¶å€™ï¼Œæ˜¾ç¤ºç‚¸å¼¹